<script>
    setUpFormUtilities();
</script>

<!--Google Analytics Script-->
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-47702928-1', 'auto');
    ga('send', 'pageview');
</script>
<!--Ended Google Analytics Script-->


<div ng-controller="QueriesScheduleController">
    <div class="col-lg-12 col-md-12 header front_Header">
        <div class="col-md-8 col-lg-8">
            <h3 class="sub_Header">
                <i class="ace-icon fa fa-gears smaller-80"></i>
                Enquiries Dashboard
                @if (Request.IsAuthenticated && !User.IsInRole("Client User"))
                {

                    <a data-toggle="modal" id="id_AdvancedSearchLink" ng-click="showAdvancedSearchDialog()">
                        <small class="text-primary"> Advanced Search </small>
                    </a>

                    <small class="text-primary" id="id_AdvancedSearchDivider"> | </small>

                    <a data-toggle="modal" ng-click="CreateQuery()">
                        <small class="text-primary"> Create Query </small>
                    </a>
                    if (Request.IsAuthenticated && (User.IsInRole("Admin") || User.IsInRole("SuperAdmin") || User.IsInRole("Senior Manager") || User.IsInRole("Manager")))
                    {
                        <small class="text-primary"> | </small>

                        <a data-toggle="modal" ng-click="OpenDialogueForCreatingSchedule()">
                            <small class="text-primary"> Create Query Schedule </small>
                        </a>
                    }
                }
            </h3>
        </div>

        <div class="col-md-1 col-lg-1"></div>

        <div class="col-md-3 col-lg-3">
            <h3 class="makeDefault">
                @if (Request.IsAuthenticated && ((User.IsInRole("Admin") || User.IsInRole("SuperAdmin"))))
            {
                    <button type="button" id="id_makeDefault" class="btn btn-default" ng-click="SaveDefaultQueryId()">
                        Make Query Default
                    </button>

                    <button type="button" id="id_removeDefault" class="btn btn-danger" ng-click="RemoveDefaultQuery()">
                        Remove Default Query
                    </button>
                }
            </h3>
        </div>
    </div>

    <div>
        @if (Request.IsAuthenticated)
            {
            @Html.Partial("PS_Page1ASEDAdvancedSearch")
        }
        @Html.Partial("PV_EnquiriesDashboard")
        @Html.Partial("QueriesScheduleModal")
    </div>
</div>

